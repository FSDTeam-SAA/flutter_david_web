<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta content="IE=Edge" http-equiv="X-UA-Compatible" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />

    <!-- Add this script before flutter.js -->
    <script>
      // The value below is injected by flutter build, do not touch.
      var serviceWorkerVersion = "1801786232";
    </script>
    <script src="flutter.js" defer></script>
    <script src="main.dart.js" defer></script>

    <title>Driving Test</title>
  </head>
  <body>
    <div id="loading">
      <h1>Loading...</h1>
    </div>

    <script>
      window.flutterWebRenderer = "html";
    </script>

    <script>
      window.addEventListener("load", function (ev) {
        // Listen for Flutter's initialization event
        window.addEventListener("flutter-first-frame", function () {
          document.getElementById("loading").style.display = "none";
        });

        // Initialize Flutter
        _flutter.loader
          .loadEntrypoint({
            serviceWorker: {
              serviceWorkerVersion: serviceWorkerVersion,
              serviceWorkerUrl: "flutter_service_worker.js",
            },
          })
          .then(function (engineInitializer) {
            return engineInitializer.initializeEngine();
          })
          .then(function (appRunner) {
            return appRunner.runApp();
          })
          .catch(function (error) {
            console.error("Flutter initialization error:", error);
            document.getElementById("loading").textContent =
              "Error loading app: " + error;
          });
      });
    </script>
  </body>
</html>
